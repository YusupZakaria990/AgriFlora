<!DOCTYPE html>
<html lang="en">
<%= render 'layouts/header' %>
<body class="g-sidenav-show  bg-gray-100">
<%= render 'layouts/sidebar' %>
  <main class="main-content position-relative max-height-vh-100 h-100 mt-1 border-radius-lg ">
    <!-- Navbar -->
    <nav class="navbar navbar-main navbar-expand-lg px-0 mx-4 shadow-none border-radius-xl" id="navbarBlur" navbar-scroll="true">
      <div class="container-fluid py-1 px-3">
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb bg-transparent mb-0 pb-0 pt-1 px-0 me-sm-6 me-5">

            <li class="breadcrumb-item text-sm text-dark active" aria-current="page">Dashboard</li>
          </ol>
          
          <h6 class="font-weight-bolder mb-0">Dashboard</h6>
        </nav>
        <div class="collapse navbar-collapse mt-sm-0 mt-2 me-md-0 me-sm-4" id="navbar">
          <div class="ms-md-auto pe-md-4 d-flex align-items-center">
          </div>
          <ul class="navbar-nav  justify-content-end">
            <li class="nav-item d-flex align-items-center">
            <%= link_to destroy_user_session_path, method: :delete do %>
              <span class="text-sm">
                <i class="fa fa-sign-out me-sm-1"></i>
                Sign Out
              </span>
            <% end %>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- End Navbar -->
    <div class="container-fluid py-4">
      <div class="row">
        <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
          <div class="card">
            <div class="card-body p-3">
              <div class="row">
                <div class="col-8">
                  <div class="numbers">
                    <p class="text-sm mb-0 text-capitalize font-weight-bold">Total Item</p>
                    <h5 class="font-weight-bolder mb-0">
                      <%= @products.count %>
                    </h5>
                  </div>
                </div>
                <div class="col-4 text-end">
                  <div class="icon icon-shape bg-gradient-primary shadow text-center border-radius-md">
                    <i class="fas fa-database" aria-hidden="true"></i>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
          <div class="card">
            <div class="card-body p-3">
              <div class="row">
                <div class="col-8">
                  <div class="numbers">
                    <p class="text-sm mb-0 text-capitalize font-weight-bold">Stufs</p>
                    <h5 class="font-weight-bolder mb-0">
                    <%= @categories = Category.where(name: "Stuff").size %>
                    </h5>
                  </div>
                </div>
                <div class="col-4 text-end">
                  <div class="icon icon-shape bg-gradient-primary shadow text-center border-radius-md">
                    <i class="fas fa-database" aria-hidden="true"></i>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
          <div class="card">
            <div class="card-body p-3">
              <div class="row">
                <div class="col-8">
                  <div class="numbers">
                    <p class="text-sm mb-0 text-capitalize font-weight-bold">Plants</p>
                    <h5 class="font-weight-bolder mb-0">
                      <%= @categories = Category.where(name: "Plant").count %>
                    </h5>
                  </div>
                </div>
                <div class="col-4 text-end">
                  <div class="icon icon-shape bg-gradient-primary shadow text-center border-radius-md">
                    <i class="fas fa-database" aria-hidden="true"></i>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-xl-3 col-sm-6">
          <div class="card">
            <div class="card-body p-3">
              <div class="row">
                <div class="col-8">
                  <div class="numbers">
                    <p class="text-sm mb-0 text-capitalize font-weight-bold">Seed</p>
                    <h5 class="font-weight-bolder mb-0">
                      <%= @categories = Category.where(name: "Seed").count %>
                    </h5>
                  </div>
                </div>
                <div class="col-4 text-end">
                  <div class="icon icon-shape bg-gradient-primary shadow text-center border-radius-md">
                     <i class="fas fa-database" aria-hidden="true"></i>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row my-4">
        <div class="col-lg-12 col-md-6 mb-md-0 mb-4">
          <div class="card">
            <div class="card-header pb-0">
              <div class="row">
                <div class="col-lg-6 col-7">
                  <h6>Product Table</h6>
                  <p class="text-sm mb-0">
                    <i class="fa fa-check text-info" aria-hidden="true"></i>
                    <span class="font-weight-bold ms-1"><%= @products.count %></span> items has been added
                  </p>
                  <br>
                    <%= link_to new_product_path, class: "btn btn-dark" do %>
                        <i class="fas fa-plus"></i> Add New Produt
                    <% end %>
                </div>
              </div>
              <%= render 'products/search_form' %>
            </div>
            <div class="card-body px-4">
              <div class="table-responsive">
                  <table class="table align-items-center mb-0" id="example" class="table table-striped table-bordered" style="width:100%">
                    <thead>
                      <tr>
                      <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">Number</th>
                        <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"><%= sort_link(@q, :code, "Product Code", default_order: :asc) %></th>
                        <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">Name</th>
                        <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Category</th>
                        <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Stock</th>
                        <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7" colspan="3">Action</th>
                      </tr>
                    </thead>
                    <tbody>
                    <% @i = 0 %>
                      <% @products.each do |product| %>
                        <tr>
                          <td class="align-middle text-center text-sm">
                            <div class="d-flex px-3 py-1">
                              <div class="d-flex flex-column justify-content-center">
                                <%= @i+=1 %>
                              </div>
                            </div>
                          </td>
                          <td class="align-middle text-center text-sm">
                            <div class="d-flex px-3 py-1">
                              <div class="d-flex flex-column justify-content-center">
                                <%= product.code %>
                              </div>
                            </div>
                          </td>
                          <td>
                            <%= product.product_name %>
                          </td>
                           <td class="align-middle text-center text-sm">
                            <%= product.category.name %>
                          </td>
                          <td class="align-middle text-center">
                            <%= product.stock %>
                          </td>
                          <td class="align-middle text-center text-sm">
                            <%= link_to product do %>
                                <i class="fa fa-eye"></i> show
                            <% end %>
                          </td>
                          <td class="align-middle text-center text-sm">
                            <%= link_to edit_product_path(product) do %>
                                <i class="fas fa-pencil-alt"></i> edit
                            <% end %>
                          </td>
                          <td class="align-middle text-center text-sm">
                            <%= link_to product_path(product), method: :delete do %>
                                <i class="far fa-trash-alt"></i> delete
                            <% end %>                      
                          </td>
                        <% end %>
                      </tr>
                    </tbody>
                  </table>
              </div>
            </div>
          </div>
        </div>
      </div>
      <%= render 'layouts/footer' %>
    </div>
  </main>
  <!--   Core JS Files   -->

    <script type="text/javascript">
      document.addEventListener('DOMContentLoaded', function () {
          let table = new DataTable('#example');
      });
    </script>

    <%= javascript_include_tag "popper.min.js" %>
    <%= javascript_include_tag "bootstrap.min.js" %>
    <%= javascript_include_tag "perfect-scrollbar.min.js" %>
    <%= javascript_include_tag "smooth-scrollbar.min.js" %>
    <%= javascript_include_tag "chartjs.min.js" %>
  <!-- Github buttons -->
  <%= javascript_include_tag "https://buttons.github.io/buttons.js" %>
  <%= javascript_include_tag "soft-ui-dashboard.min" %>
  <%= javascript_include_tag "soft-ui-dashboard.js" %>

</body>
</html>